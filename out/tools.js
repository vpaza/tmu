"use strict";const colorCache={};class Color{constructor(t,s,r){this.set(t,s,r)}toString(){return`rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`}set(t,s,r){this.r=this.clamp(t),this.g=this.clamp(s),this.b=this.clamp(r)}hueRotate(t=0){t=t/180*Math.PI;var s=Math.sin(t),t=Math.cos(t);this.multiply([.213+.787*t-.213*s,.715-.715*t-.715*s,.072-.072*t+.928*s,.213-.213*t+.143*s,.715+.285*t+.14*s,.072-.072*t-.283*s,.213-.213*t-.787*s,.715-.715*t+.715*s,.072+.928*t+.072*s])}grayscale(t=1){this.multiply([.2126+.7874*(1-t),.7152-.7152*(1-t),.0722-.0722*(1-t),.2126-.2126*(1-t),.7152+.2848*(1-t),.0722-.0722*(1-t),.2126-.2126*(1-t),.7152-.7152*(1-t),.0722+.9278*(1-t)])}sepia(t=1){this.multiply([.393+.607*(1-t),.769-.769*(1-t),.189-.189*(1-t),.349-.349*(1-t),.686+.314*(1-t),.168-.168*(1-t),.272-.272*(1-t),.534-.534*(1-t),.131+.869*(1-t)])}saturate(t=1){this.multiply([.213+.787*t,.715-.715*t,.072-.072*t,.213-.213*t,.715+.285*t,.072-.072*t,.213-.213*t,.715-.715*t,.072+.928*t])}multiply(t){var s=this.clamp(this.r*t[0]+this.g*t[1]+this.b*t[2]),r=this.clamp(this.r*t[3]+this.g*t[4]+this.b*t[5]),t=this.clamp(this.r*t[6]+this.g*t[7]+this.b*t[8]);this.r=s,this.g=r,this.b=t}brightness(t=1){this.linear(t)}contrast(t=1){this.linear(t,-.5*t+.5)}linear(t=1,s=0){this.r=this.clamp(this.r*t+255*s),this.g=this.clamp(this.g*t+255*s),this.b=this.clamp(this.b*t+255*s)}invert(t=1){this.r=this.clamp(255*(t+this.r/255*(1-2*t))),this.g=this.clamp(255*(t+this.g/255*(1-2*t))),this.b=this.clamp(255*(t+this.b/255*(1-2*t)))}hsl(){var t=this.r/255,s=this.g/255,r=this.b/255,a=Math.max(t,s,r),e=Math.min(t,s,r);let h,i,l=(a+e)/2;if(a===e)h=i=0;else{var o=a-e;switch(i=.5<l?o/(2-a-e):o/(a+e),a){case t:h=(s-r)/o+(s<r?6:0);break;case s:h=(r-t)/o+2;break;case r:h=(t-s)/o+4}h/=6}return{h:100*h,s:100*i,l:100*l}}clamp(t){return 255<t?t=255:t<0&&(t=0),t}}class Solver{constructor(t,s){this.target=t,this.targetHSL=t.hsl(),this.reusedColor=new Color(0,0,0)}solve(){var t=this.solveNarrow(this.solveWide());return{values:t.values,loss:t.loss,filter:this.css(t.values)}}solveWide(){var s=[60,180,18e3,600,1.2,1.2];let r={loss:1/0};for(let t=0;25<r.loss&&t<3;t++){var a=this.spsa(5,s,15,[50,20,3750,50,100,100],1e3);a.loss<r.loss&&(r=a)}return r}solveNarrow(t){var s=t.loss,r=s+1;return this.spsa(s,[.25*r,.25*r,r,.25*r,.2*r,.2*r],2,t.values,500)}spsa(r,a,t,e,h){let i=null,l=1/0;var o=new Array(6),n=new Array(6),c=new Array(6);for(let s=0;s<h;s++){var u=t/Math.pow(s+1,.16666666666666666);for(let t=0;t<6;t++)o[t]=.5<Math.random()?1:-1,n[t]=e[t]+u*o[t],c[t]=e[t]-u*o[t];var g=this.loss(n)-this.loss(c);for(let t=0;t<6;t++){var p=g/(2*u)*o[t],v=a[t]/Math.pow(r+s+1,1);e[t]=function(t,s){let r=100;2===s?r=7500:4!==s&&5!==s||(r=200);3===s?t>r?t%=r:t<0&&(t=r+t%r):t<0?t=0:t>r&&(t=r);return t}(e[t]-v*p,t)}var b=this.loss(e);b<l&&(i=e.slice(0),l=b)}return{values:i,loss:l}}loss(t){var s=this.reusedColor,t=(s.set(0,0,0),s.invert(t[0]/100),s.sepia(t[1]/100),s.saturate(t[2]/100),s.hueRotate(3.6*t[3]),s.brightness(t[4]/100),s.contrast(t[5]/100),s.hsl());return Math.abs(s.r-this.target.r)+Math.abs(s.g-this.target.g)+Math.abs(s.b-this.target.b)+Math.abs(t.h-this.targetHSL.h)+Math.abs(t.s-this.targetHSL.s)+Math.abs(t.l-this.targetHSL.l)}css(r){function t(t,s=1){return Math.round(r[t]*s)}return`invert(${t(0)}%) sepia(${t(1)}%) saturate(${t(2)}%) hue-rotate(${t(3,3.6)}deg) brightness(${t(4)}%) contrast(${t(5)}%)`}}function hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,s,r,a)=>s+s+r+r+a+a);t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function getFilter(t){var s;return colorCache.hasOwnProperty(t)?colorCache[t]:3!==(s=hexToRgb(t)).length?"":(s=new Color(s[0],s[1],s[2]),(s=new Solver(s).solve()).loss<1?(colorCache[t]=s.filter,s.filter):getFilter(t))}